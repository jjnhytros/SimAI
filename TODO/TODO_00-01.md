# SimAI - TODO List Generale (Aggiornato al 29 Maggio 2025)

**Legenda:**
`[]`    Non ancorra implementato
`[!]`   Principi Guida da prendere in considerazione con priorità assoluta
`[P]`   Parzialmente implementato
`[x]`   Implementazione terminata
`[F]`   Implementazione futura
`[-]`   Implementazione non applicabile
`[0-9]`   Implementazione con priorità (0=Prioritaria, 1=Alta, 5=Media, 9=Bassa)

---

## 0. PRINCIPI GUIDA E FILOSOFIA DEL PROGETTO `[PRINCIPI]`

* `[!]` **1. Unicità e Originalità di SimAI:**
    * `[!]` a. Evitare la replica diretta di meccaniche, nomi, o elementi specifici di altri giochi.
    * `[!]` b. Cercare soluzioni di design coerenti con il lore e l'identità unica del mondo di Anthalys e della simulazione SimAI.
    * `[!]` c. Dare priorità a idee originali o a interpretazioni uniche di concetti comuni.
    * `[!]` d. L'ispirazione primaria è la "vita reale", filtrata attraverso la lente creativa di SimAI.
* `[!]` **2. Coerenza del Mondo di Gioco e della Simulazione:**
    * `[!]` a. **Esclusività della Posizione e dell'Azione degli NPC:** Un NPC può trovarsi fisicamente in un solo luogo (`current_location`) e compiere attivamente una sola azione principale in un dato momento.
    * `[!]` b. **Tempo Continuo e Conseguenze:** Le azioni richiedono tempo e hanno conseguenze realistiche. Il tempo scorre in modo continuo per tutti gli NPC nel mondo simulato.
    * `[!]` c. **Simulazione Profonda vs. Superficialità:** Preferire meccaniche profonde e interconnesse piuttosto che molte meccaniche superficiali e isolate.
    * `[!]` d. **Autonomia e Comportamento Emergente:** Gli NPC dovrebbero agire in modo autonomo basandosi sui loro bisogni, tratti, emozioni e obiettivi, portando a comportamenti emergenti e storie uniche.
    * `[]` e. Conservazione della materia/energia.
    * `[]` f. Causalità degli eventi.
* `[!]` **3. Realismo Bilanciato con Giocabilità:**
    * `[!]` a. Ricercare un alto livello di realismo nelle meccaniche di base della vita (bisogni, relazioni, lavoro, ecc.).
    * `[!]` b. Bilanciare il realismo con la necessità di un gameplay divertente, accessibile e gestibile. Evitare eccessiva microgestione o complessità frustrante.
    * `[!]` c. Il "realismo" include la complessità delle emozioni umane, le sfide della vita e le conseguenze delle scelte.
* `[!]` **4. Rispetto e Inclusività:**
    * `[!]` a. Rappresentare una vasta gamma di personalità, stili di vita, culture (all'interno del lore di Anthalys) e sfide in modo rispettoso.
    * `[!]` b. Evitare stereotipi dannosi.
    * `[!]` c. Permettere al giocatore di esplorare tematiche complesse e sensibili in modo maturo (se e quando verranno implementate).
* `[!]` **5. Modularità e Espandibilità del Design:**
    * `[!]` a. Progettare sistemi (tratti, skill, carriere, ecc.) in modo modulare per facilitare future aggiunte ed espansioni.
    * `[!]` b. Utilizzare strutture dati flessibili e codice ben organizzato.
* `[!]` **6. Approccio Modulare e Scalabile:**
    * `[!]` a. Favorire la creazione di sistemi di gioco modulari con interfacce ben definite.
    * `[]` b. Progettare le meccaniche tenendo conto della futura necessità di gestire una vasta popolazione di NPC (LOD AI). *(Concettualizzazione LOD in corso)*.
    * `[]` c. Separare la logica di gioco dalla sua rappresentazione (UI).
* `[!]` **7. Radicamento nel Lore di Anthalys:**
    * `[!]` a. Le meccaniche di gioco, le normative, le festività e gli aspetti culturali devono riflettere e essere coerenti con il lore stabilito per Anthalys, inclusa la sua Costituzione.
    * `[]` b. La "Costituzione della Nazione di Anthal" definisce i principi fondamentali, la struttura dello stato, i diritti dei cittadini e i valori economici/sociali. *(Testo della Costituzione fornito, da usare come riferimento per il design di gioco)*.
* `[!]` **8. Aspirazione alla Simulazione Profonda e Comportamento Emergente (Obiettivo "Total Realism"):**
    * `[!]` a. Pur bilanciando con la giocabilità (Principio 3), tendere continuamente verso una maggiore profondità e realismo nelle meccaniche di base e avanzate della vita e della società.
    * `[!]` b. **Individualità Estrema:** Mirare a sistemi che permettano agli NPC di sviluppare percorsi di vita, hobby, paure e stranezze uniche non predefinite, basate su una combinazione irripetibile di genetica, esperienze, interpretazioni soggettive e pure casualità, portando a comportamenti che possano genuinamente sorprendere pur rimanendo coerenti. (Estensione di IV.4)
    * `[!]` c. **Causalità Complessa:** Le azioni devono avere conseguenze a breve, medio e lungo termine, che si propagano attraverso i sistemi interconnessi del gioco, creando catene di eventi realistici. (Rafforzamento di 0.2.f)

---

## I. FONDAMENTA DEL GIOCO E MOTORE

* **1. Core Grafico (Pygame):** `[]` 
* **2. Struttura Modulare del Codice:** `[]`
    * `[P]` a. Organizzazione cartelle base (incluse `core/`, `core/AI/`, `core/modules/`) (Definizione struttura cartelle ora concreta e discussa)
    * `[P]` b. Creazione file principali (`simai.py` (ex `main.py`), `core/simulation.py`, `core/settings.py` hanno uno scheletro/contenuto iniziale; `core/__init__.py` creato)
    * `[]` c. Definizione classe `Character` come nucleo degli NPC.
    * `[]` d. Implementazione `__init__.py` per package per facilitare importazioni modulari (es. `modules/traits/__init__.py`).
    * `[]` e. **Nuovo - Refactoring Strutturale per Enum e Classi Complesse (Tratti, Skill, Azioni):** `[PRIORITÀ: MEDIA-ALTA]` *(Concettualizzazione iniziata, implementazione per Tratti da iniziare)*
        * `[]` i. **Tratti:**
            * `[]` 1. Creare `modules/traits/trait_enums.py` e spostarvi l'Enum `Trait` da `modules/enums.py`.
            * `[]` 2. Creare sottocartelle per categoria in `modules/traits/` (es. `personality/`, `social/`, `physical_health/`, `mental_cognitive/`, `lifestyle_hobby/`) e spostare i file `.py` delle classi tratto individuali nelle rispettive categorie.
            * `[]` 3. Aggiornare `modules/traits/__init__.py` per importare/esportare l'Enum `Trait` da `trait_enums.py`, `BaseTrait`, e (idealmente tramite auto-registrazione/scoperta) tutte le classi tratto dalle sottocartelle e popolare/esportare `TRAIT_CLASS_MAP`.
            * `[]` 4. (Opzionale Avanzato) Implementare un sistema di auto-registrazione con decoratori per le classi tratto per popolare automaticamente `TRAIT_CLASS_MAP`.
            * `[]` 5. Aggiornare tutti gli import di `Trait` e delle classi tratto nel progetto per riflettere la nuova struttura.
        * `[]` ii. **Skill:** (Come definito prima, ma con priorità futura)
        * `[]` iii. **Azioni:** (Come definito prima, ma con priorità futura)
            * `[]` 1. Implementazione di una classe `BaseAction` da cui ereditare. *(Definita concettualmente, e usata per WriteBookAction)*
            * `[]` 2. Suddivisione in categorie (es. Creative, Social, Practical, ecc.). *(Struttura directory implementata per `WriteBookAction`)*
        * `[]` iv. Il file `modules/enums.py` principale conterrà le Enum più piccole o quelle non ancora spostate. *(Stato attuale)*
* `[]` **3. Motore di Progressione Temporale di Base:** `[MODIFICATO]`
    * `[]` a. Il sistema gestisce il flusso fondamentale del tempo di gioco, il ciclo giorno/notte di base (28 ore), e l'aggiornamento incrementale della simulazione (tick, minuti, ore).
    * `[]` b. Per tutti i dettagli sul calendario specifico di Anthalys, la struttura di anni/mesi/giorni, le stagioni, le festività, gli eventi cosmici e la gestione avanzata del tempo, **vedi Sezione XXXII. IL TEMPO IN ANTHALYS: Calendario, Cicli Stagionali, Eventi Cosmici e Festività**.
* `[]` **4. Loop di Simulazione Principale (`Simulation.step()`):** *(`Simulation.h/.cpp` con `step()` creato)*.
    * `[]` a. Avanzamento del tempo (`TimeManager.advance_time()`) (Metodo in `TimeManager` previsto).
    * `[]` b. Aggiornamento bisogni NPC (dettagliati e `general_wellbeing` per background) (Previsto in `Character::updateNeeds`, `BackgroundNPCState` ha `generalWellbeing`).
    * `[]` c. Logica decisionale (`AIDecisionMaker` per NPC dettagliati; routine/statistiche per background) (`AIDecisionMaker` scheletro concettualizzato, `Character::thinkAI` è hook).
    * `[]` d. Esecuzione azioni (dettagliate e astratte) (`Character::executeCurrentAction` previsto).
    * `[]` e. Integrazione sistema meteo e stagioni (impatto su NPC) - *(Dettagli meteo/stagioni ora in XXXII e XXVI)* (`WeatherManager.h/.cpp` scheletro creato).
    * `[]` f. Gestione eventi di calendario (festività, compleanni) - *(Dettagli calendario ora in XXXII)* (`CalendarSystem.h/.cpp` scheletro creato).
    * `[]` g. Orchestrazione Aggiornamenti NPC di Background (LOD3) - chiamate a `_perform_daily_background_update`, `_perform_periodic_background_update`, `_perform_annual_background_update` (`BackgroundNPCState` e metodi di update LOD in `Character` previsti).
* `[]` **5. Salvataggio e Caricamento:**
    * `[]` a. Salvare lo stato della simulazione (NPC, tempo, meteo) in JSON (`SaveLoadManager.h/.cpp` creato).
    * `[]` b. Caricare uno stato salvato (`SaveLoadManager.h/.cpp` creato).
    * `[]` c. **Nuovo - Salvataggi Multipli / Slot di Salvataggio:** Gestire più file di salvataggio (`SaveLoadManager.h/.cpp` prevede questa logica).
    * `[]` d. Gestione errori e versioning dei salvataggi.
* `[]` **6. Interfaccia Utente (TUI `curses`):** *(`TUIManager.h/.cpp`, `InputHandler.h/.cpp` creati)*. (Spostato da I.6 a I.6 per coerenza, il contenuto è da XI)
    * *(Vedi Sezione XI per i dettagli completi dell'Interfaccia Utente)*
* `[P]` **7. Gestione delle Configurazioni e Settings:**
    * `[P]` a. File `settings.py` centrale per costanti globali (`core/settings.py` ora contiene molte costanti definite per tempo, calendario, NPC, bisogni, scuola, economia, ecc.)
    * `[]` b. **Refactoring Architetturale - Configurazioni Modulari:**
        * `[]` i. Spostare costanti specifiche di sistema in file `_config.py` dedicati (es. `careers_config.h` creato come esempio).
        * `[]` ii. Obiettivo: `settings.py` più snello, migliore modularità.
        * `[]` iii. Definire quali sistemi beneficerebbero di questa separazione (Scuola, Carriere, forse Meteo Avanzato).
    * `[]` c. Menu impostazioni per modificare `settings.json` (o i futuri `_config.json`) (`SettingsManager.h/.cpp` creato).
* `[]` **8. Struttura Modulare del Codice (Avanzata):**
    * `[]` a. Organizzazione cartelle base e `__init__.py` per package (Struttura C++ directory e namespace è `[]`).
    * `[]` b. **Refactoring Architetturale - Logica di Sistema Modulare:**
        * `[]` i. Valutare creazione di moduli Python dedicati per sistemi complessi (es. `school_system`, `career_system`, `economic_system`, `relationship_manager`) con logica (`_logic.py` o `_manager.py`) e config proprie. *(Scheletri per `CareerManager`, `WeatherManager`, `RelationshipManager` etc. creati in C++)*.
        * `[]` ii. Ogni modulo esporrebbe API chiare (Obiettivo dei file `.h` creati).
* `[]` **9. Interfaccia Utente (Logica di Input e Comandi):**
    * `[]` a. Gestione input da tastiera (`input_handler.py`) (`InputHandler.h/.cpp` creato).
    * `[]` b. Sistema di comandi utente più strutturato (collegato a Command Palette I.6.1.g) (`CommandProcessor.h/.cpp` creato).

---

